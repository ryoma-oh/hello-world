---
layout: page
title: "バージョン管理"
permalink: /docs/software-eng6
---

# ソフトウェア工学 2024

[ホーム](/docs/index)

## バージョン管理

　バージョン管理では、ファイルを「誰が」、「いつ」、「どのように」変更したかを管理する。これらの情報を管理することで多数のメンバーとも共同でコード開発ができる。Subversionなどの集中管理型のシステムとgitなどの分散管理型のシステムがある。

**集中管理型**

　リモートレポジトリのみでバージョン管理をするため、同時編集をするとコンフリクトが発生しやすく、同期に時間がかかるというデメリットがある。

**分散管理型**

　ローカルレポジトリで作業したファイルをリモートレポジトリへアップロードするという形のため、リモートレポジトリへのアクセス頻度が低く、障害に強いというメリットがある。ローカルレポジトリとリモートレポジトリの両方でバージョン管理をする。

### git

　分散管理型のバージョン管理システムで、変更履歴が残り変更した箇所に戻ることができる。他者と共同編集もできる。

**コミット**

　ファイル作成・変更・削除の記録を残す。コミットにはメッセージを残すことができ、コミットの単位はユーザーが自由に決定する。

**レポジトリ**

　gitが管理するプロジェクトのフォルダで、ローカルレポジトリは個々のプロジェクト実行環境、リモートレポジトリはGithubなど共有の管理場所である。

**ローカルレポジトリでの流れ**

ワークツリー

・untracked　gitで管理されていないファイルの状態

・unmodified　gitで管理されているが変更されていないファイルの状態

・modified　gitで管理されていて変更されたファイルの状態


ステージングエリア

　gitで管理するファイルを登録する場所。git addコマンドでファイルを登録できる。


gitディレクトリ

　コミット(commit)により変更を登録される。commitされたファイルはunmodifiedの状態になる。

**リモートレポジトリレポジトリでの流れ**

・ローカルレポジトリでcommitされた変更をリモートレポジトリへ反映(git push)

・リモートレポジトリにある内容をローカルレポジトリに反映(git pull)

・ブランチで作業を枝分かれできる。

### gitコマンド

git add

　ステージングエリアに追加


git commit

　コミットの実行


git init

　gitの初期化・設定開始


git status

　ワークツリーのステータスを表示


git config

　設定周りの確認・変更


git log

　ログを表示

　-- onelineでコミットメッセージの1行のみの一覧表示


git diff

　ファイルの差分を表示


git push

　変更をアップロードする


git pull

　リモートレポジトリの同期


### github

　リモートレポジトリのホスティングサービスの１つで、オープンソースソフトウェアの主要なポータルサイト。

**githubでのソフトウェアエンジニアリング**

・fork

　他ユーザーのリモートレポジトリを自分のリモートレポジトリにコピーしてくる。

・clone

　リモートレポジトリをローカルレポジトリにコピーしてくる。

・template

　いくつでもforkできる。

・issues

　レポジトリに関する問題・課題・バグ・機能追加や質問などを挙げるための機能。Redmineでいうticket。

・projects

　issuesなどを管理するためのテーブル・kanban

・pul requests

　github上でdevブランチを作成し、そのブランチに変更したファイルをcommit・pushした場合、mainブランチにpull requestをしてpull requestをmergeすることでmainブランチに更新を反映できる。

**マークダウン**

　簡単に文章を記述できる記法で、githubなど多くのアプリケーションで採用されている。pandocを使うと.texや.pdf、.docx、.htmlなどに変換できる。

### CI/CD

　Continuous Integration(CI)とは、コード変更を共有レポジトリに頻繁に統合するプロセスのことで、自動テストとビルドを定期的に実行してバグの早期発見と修正を可能にする。CIの自動化により開発のスムーズな進行を促進できる。

　Continuous Delivery(CD)とは、コード変更をテスト環境や本番環境に自動的にデプロイするプロセスのことで、自動デプロイメントを組み込んで手動操作によるデプロイの必要性を排除する。

**GitHub Actionsを使用したCI/CD**

　YAMLファイルでワークフローを定義し、github/workflows/ディレクトリに配置する。YAMLファイルにはトリガーやジョブ、ステップなどで構成される。

・トリガー

　プッシュ、プルリクエストなどどのような条件でワークフローを起動するかを決める。

・ジョブとステップ

　ジョブは並列実行が可能で、ステップではシェルコマンドの実行やアクションの使用が可能。

・アクション

　再利用可能なワークフローの構成要素で、コミュニティが作成したアクションも利用可能。

**CI/CDの実践**

　講義では、test.pyを配置してプルリクエストをすると自動的にgithub actionsが実行され、flake8がtest.pyのコードチェックをするようなflake8.ymlを作成した。また、github pagesを使ってHP更改をCI/CDにより自動化したwebpageを作成している。

**Github Pages**

　Githubにあるリモートレポジトリの内容をwebpageとして公開でき、HP更改はCI/CDにより自動化し、Jekyllを使用することでmarkdownファイルを自動でhtml化することができる。このようにしてこのウェブページを作っている。